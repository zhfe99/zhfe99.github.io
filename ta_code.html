<!DOCTYPE html><html><head><title>Software for Canonical Time Warping</title><link rel="icon" href="img/head.icon"><link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"><link rel="stylesheet" href="s/f-zhou.css" type="text/css"></head><body><div id="header"><div id="nav" class="container"><ul><li><a class="item" href="index.html">FEATURED</a></li><li><a class="item" href="pub.html">PUBLICATIONS</a></li><li><a class="item" href="soft.html">SOFTWARES</a></li><li><a class="item" href="bio.html">ABOUT</a></li></ul></div></div><div class="container container_top"><h1>Software for Canonical Time Warping</h1><div class="down_button"><a href="http://humansensing.cs.cmu.edu/down_ctw.html" class="level3">DOWNLOAD</a><!--<p class="bottom">89MB</p>--></div><div class="line_wrap"><div class="line_content"><h2>Introduction</h2></div></div><div class="sec_content"><p>This page contains software and instructions for           <a href="ta.html" class="level3">canoical time warping (CTW)</a><sup><a href="#ref_ctw"><span>[</span>2<span>]</span></a></sup>           and <a href="ta.html" class="level3">generalized time warping (GTW)</a><sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.           In addition, we implemented the following methods as baselines:<ul class="li_soft"><li>dynamic time warping (DTW)<sup><a href="#ref_dtw"><span>[</span>3<span>]</span></a></sup>,</li><li>derivative dynamic time warping (DDTW)<sup><a href="#ref_ddtw"><span>[</span>4<span>]</span></a></sup>,</li><li>iterative motion warping (IMW)<sup><a href="#ref_imw"><span>[</span>5<span>]</span></a></sup>.</li></ul>In order to align more than two sequences, we extended DTW, DDTW, IMW and CTW to pDTW, pDDTW,           pIMW and pCTW respectively in the framework of           Procrustes analysis<sup><a href="#ref_pro"><span>[</span>6<span>]</span></a></sup>.</p></div><div class="line_wrap"><div class="line_content"><h2>Installation</h2></div></div><div class="sec_content"><figure class="code"><table><tbody><tr><td class="gutter"><div class="line-numbers"><span class="line">1</span>                     <span class="line">2</span>                     <span class="line">&nbsp;</span>                     <span class="line">&nbsp;</span>                     <span class="line">3</span>                     <span class="line">4</span>                     <span class="line">5</span></div></td><td><div class="commands"><span class="line">>>&nbsp;<span class="nb">cd</span>&nbsp<span class="nv">ctw</span></span>                     <span class="line">>>&nbsp;<span class="nb">ls</span></span>                     <span class="line">make.m addPath.m demoToy.m demoToys.m demoWeis.m demoKit.m demoMix.m testToy.m testToys.m</span>                     <span class="line">testWeis.m readme.txt <span class="nv">data</span> <span class="nv">lib</span> <span class="nv">src</span></span>                     <span class="line">>>&nbsp;<span class="na">make</span></span>                     <span class="line">>>&nbsp;<span class="na">addPath</span></span>                     <span class="line">>>&nbsp;<span class="na">demoKit</span></span></div></td></tr></tbody></table></figure></div><div class="line_wrap"><div class="line_content"><h2>Package Content</h2></div></div><div class="sec_content">The package of <span class="key_word">ctw.zip</span> contains following folders and files:<table class="all_files"><tr><td class="sec_table_1st_col"><span class="key_word">data</span>:</td><td>This folder contains a subset of               <a href="http://kitchen.cs.cmu.edu" class="level3">CMU Grand Challenge dataset</a>,               <a href="http://mocap.cs.cmu.edu" class="level3">CMU Mocap dataset</a>,               <a href="http://www.wisdom.weizmann.ac.il/~vision/SpaceTimeActions.html" class="level3">Weizmann Action dataset</a>               and an accelerometer sequence.</td></tr><tr><td class="sec_table_1st_col"><span class="key_word">src</span>:</td><td>This folder contains the main implementation of CTW, GTW and other baseline methods.</td></tr><tr><td class="sec_table_1st_col"><span class="key_word">lib</span>:</td><td>This folder contains some necessary library functions.</td></tr><tr><td class="sec_table_1st_col"><span class="key_word">make.m</span>:</td><td>Matlab makefile for C++ code.</td></tr><tr><td class="sec_table_1st_col"><span class="key_word">addPath.m</span>:</td><td>Adds the sub-directories into the path of Matlab.</td></tr><tr><td class="sec_table_1st_col"><span class="key_word">demoToy.m</span>:</td><td>A demo comparison of different alignment methods on aligning two synthetic sequences.<div class="addition">This is a similar function used for visualizing (Fig. 3) the first experiment (Sec 5.1) in the CTW paper<sup><a href="#ref_ctw"><span>[</span>2<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">demoKit.m</span>:</td><td>A demo of using CTW on aligning two <a href="http://kitchen.cs.cmu.edu" class="level3">CMU Grand Challenge mocap sequences</a>.<div class="addition">This is the same function used for visualizing (Fig. 4) the second experiment (Sec 5.2) in the CTW paper<sup><a href="#ref_ctw"><span>[</span>2<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">demoToys.m</span>:</td><td>A demo comparison of different alignment methods on aligning three synthetic sequences.<div class="addition">This is the same function used for visualizing (Fig. 4) the first experiment (Sec 5.2) in the GTW paper<sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">demoWeis.m</span>:</td><td>A demo comparison of different alignment methods on aligning three <a href="http://www.wisdom.weizmann.ac.il/~vision/SpaceTimeActions.html" class="level3">Weizmann video sequences</a> with different features.<div class="addition">This is the same function used for visualizing (Fig. 5) the second experiment (Sec 5.3) in the GTW paper<sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">demoMix.m</span>:</td><td>A demo of using GTW on aligning three multi-modal sequences (mocap, video, and accelerator)<div class="addition">This is the same function used for visualizing (Fig. 6) the third experiment (Sec 5.4) in the GTW paper<sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">testToy.m</span>:</td><td>Test alignment methods on aligning two synthetic sequences 100 times.<div class="addition">This is a similar function used for reporting (Fig. 3h) the first experiment (Sec 5.1) in the CTW paper<sup><a href="#ref_ctw"><span>[</span>2<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">testToys.m</span>:</td><td>Test alignment methods on aligning three synthetic sequences 100 times.<div class="addition">This is the same function used for reporting (Fig. 4g) the first experiment (Sec 5.2) in the GTW paper<sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.</div></td></tr><tr><td class="sec_table_1st_col"><span class="key_word">testWeis.m</span>:</td><td>Test alignment methods on aligning three <a href="http://www.wisdom.weizmann.ac.il/~vision/SpaceTimeActions.html" class="level3">Weizmann video sequences</a> 10 times.<div class="addition">This is the same function used for reporting (Fig. 5h) the second experiment (Sec 5.3) in the GTW paper<sup><a href="#ref_gtw"><span>[</span>1<span>]</span></a></sup>.</div></td></tr></table></div><div class="line_wrap"><div class="line_content"><h2>FAQs</h2></div></div><div class="sec_content"><div class="faq_panel"><h2>How to initialize CTW and GTW?</h2><div class="faq_panelcontent">CTW and GTW can be initialized by any             temporal alignment algorithm. In our experiments, CTW, GTW and other iterative time warping methods were             initialized by <strong>uniform time warping (UTW)</strong>. Given two             sequences of different lengths, UTW uniformly and linearly stretches             sequences to align frames. For instance, given two sequences, where             <span class="key_word">X = [x1, x2, x3]</span> and             <span class="key_word">Y = [y1, y2, y3, y4, y5, y6]</span>, UTW             aligns the frames as <span class="key_word">{x1, y1, y2}</span>,             <span class="key_word">{x2, y3, y4}</span>,             <span class="key_word">{x3, y5, y6}</span>.</div></div><div class="faq_panel"><h2>How to set the parameters for CTW and GTW?</h2><div class="faq_panelcontent">One of the most important             parameters for CTW and GTW is the regularization             weight <span class="key_word">&#955;</span> for CCA. This             is because without proper regularization, CCA becomes an             ill-posed problem in high-dimensional space. I usually             set <span class="key_word">&#955;=0.1</span>. But you             might need to tune this parameter for your applications.</div></div><div class="faq_panel"><h2>How to use DTW for aligning more than 2 sequences?</h2><div class="faq_panelcontent">One of the most important             parameters for CTW and GTW is the regularization             weight <span class="key_word">&#955;</span> for CCA. This             is because without proper regularization, CCA becomes an             ill-posed problem in high-dimensional space. I usually             set <span class="key_word">&#955;=0.1</span>. But you             might need to tune this parameter for your applications.</div></div><div class="faq_panel"><h2>Which functions are implemented in C++?</h2><div class="faq_panelcontent">For each C++ code, we provide its corresponding Matlab           version. For instance, you can           use <span class="key_word">dtwFordSlow.m</span> instead of           <span class="key_word">dtwFord.cpp</span>. They have the           same interface in both input and output. The C++ code is           faster to obtain result while the Matlab version is easier           to understand and debug.</div></div></div><div class="line_wrap"><div class="line_content"><h2>Change Log</h2></div></div><div class="sec_content"><ul class="sec_log"><li><div class="date">2013-05-05:</div><div class="detail"><div class="log_item">Merge the code of GTW.</div><div class="log_item">Add the implementation of DDTW, IMW, pDTW, pIMW and pCTW.</div><div class="log_item">Add a demo for aligning three multi-modal sequences using GTW.</div><div class="log_item">Add testing file for randomly generating 100 pairs of synthetic sequences for evaluating the performance of CTW and GTW.</div><div class="log_item">Add testing file for randomly generating 10 pairs of <a href="http://www.wisdom.weizmann.ac.il/~vision/SpaceTimeActions.html" class="level3">Weizmann video sequences</a> for evaluating the performance of CTW and GTW.</div></div></li><li><div class="date">2012-04-17:</div><div class="detail"><div class="log_item">Add a demo file for <a href="http://kitchen.cs.cmu.edu" class="level3">CMU Grand Chanllenge dataset</a>.</div></div></li><li><div class="date">2010-09-13:</div><div class="detail"><div class="log_item">Add the main implementation of the algorithms.</div><div class="log_item">Add a demo file for synthetic data.</div></div></li></ul></div><div class="line_wrap"><div class="line_content"><h2>References</h2></div></div><div class="sec_content"><ul class="sec_pub"><li><div class="index" id="ref_gtw">[1]</div><div class="detail"><span class="pub_info_title">Generalized Time Warping for Multi-modal Alignment of Human Motion</span><div class="pub_info_other">IEEE Conference on Computer Vision and Pattern Recognition (CVPR), 2012<br>F. Zhou and <a href="http://www.cs.cmu.edu/~ftorre" class="level1">F. De la Torre</a></div></div></li><li><div class="index" id="ref_ctw">[2]</div><div class="detail"><span class="pub_info_title">Canonical Time Warping for Alignment of Human Behavior</span><div class="pub_info_other">Advances in Neural Information Processing Systems (NIPS), 2009<br>F. Zhou and <a href="http://www.cs.cmu.edu/~ftorre" class="level1">F. De la Torre</a></div></div></li><li><div class="index" id="ref_dtw">[3]</div><div class="detail"><span class="pub_info_title">Fundamentals of Speech Recognition</span><div class="pub_info_other">Prentice Hall, 1993<br><a href="http://www.ece.ucsb.edu/Faculty/Rabiner/ece259/" class="level1">L. Rabiner</a> and B. Juang</div></div></li><li><div class="index" id="ref_ddtw">[4]</div><div class="detail"><span class="pub_info_title">Derivative Dynamic Time Warping</span><div class="pub_info_other">SIAM International Conference on Data Mining (SDM), 2001<br><a href="http://www.cs.ucr.edu/~eamonn/" class="level1">E. J. Keogh</a> and M. J. Pazzani</div></div></li><li><div class="index" id="ref_imw">[5]</div><div class="detail"><span class="pub_info_title">Style Translation for Human Motion</span><div class="pub_info_other">ACM Transactions on Graphics (ToG), vol. 24, pp. 1082-1089, 2005<br>E. Hsu, K. Pulli and <a href="http://www.adobe.com/technology/people/seattle/jovan-popovic.html" class="level1">J. Popovic</a></div></div></li><li><div class="index" id="ref_pro">[6]</div><div class="detail"><span class="pub_info_title">Statistical Shape Analysis</span><div class="pub_info_other">Wiley, 1998<br>I. L. Dryden and K. V. Mardia</div></div></li></ul></div><div class="line_wrap"><div class="line_content"><h2>Copyright</h2></div></div><div class="sec_content"><p>This software is free for use in research projects. If you publish           results obtained using this software, please use           this citation:</p><figure class="bib"><span class="line">@article{ZhouD16,</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;author = {Feng Zhou and Fernando {De la Torre}},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;title = {Generalized Canonical Time Warping},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;journal = {Transactions on Pattern Analysis and Machine Intelligence (PAMI)},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;year = {2016},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;volume = {38},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;number = {2},</span>           <span class="line">&nbsp;&nbsp;&nbsp;&nbsp;pages = {279-294},</span>           <span class="line">}</span></figure><p>Contributing back bug fixes and improvements is polite and           encouraged. If you have any question, feel free to           contact <a href="http://www.f-zhou.com" class="level1">Feng           Zhou</a>.</p></div></div><div class="footer"></div><!-- js --><script src="//code.jquery.com/jquery-1.11.3.min.js"></script><script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script><script type="text/javascript" src="s/retina.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");       document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {       var pageTracker = _gat._getTracker("UA-5376400-1");       pageTracker._trackPageview();       } catch(err) {}</script></body></html>